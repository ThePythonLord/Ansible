---
- name: Deploy Nginx Configuration
  hosts: nginx_servers
  become: yes
  tasks:
    - name: Ensure Nginx configuration directory exists
      file:
        path: /etc/nginx
        state: directory
        mode: 0755

    - name: Copy Nginx configuration file
      template:
        src: nginx.conf.j2
        dest: /etc/nginx/nginx.conf
        owner: root
        group: root
        mode: 0644
      notify:
        - Reload Nginx

handlers:
  - name: Reload Nginx
    systemd:
      name: nginx
      state: restarted
